<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Opacity Zero Test - Autofill Security Demo</title>
    <link rel="stylesheet" href="../shared/style.css" />
    <style>
      .hidden-field {
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ü´• Opacity Zero Test</h1>
        <p>Testing autofill capture with opacity: 0</p>
      </div>

      <div class="content">
        <div class="technique-info">
          <h3>Technique Description</h3>
          <p>
            This test demonstrates how a malicious website might use
            <code>opacity: 0</code> to hide an input field. The element remains
            in the document flow and takes up space, but is completely
            transparent. Users can still interact with it if they know where it
            is.
          </p>
        </div>

        <div class="demo-company">
          <h2>DataVault Systems</h2>
          <p>Secure data management and analytics platform</p>
        </div>

        <form class="login-form" id="loginForm">
          <div class="form-group">
            <label for="email">Email Address</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              autocomplete="email"
            />
          </div>

          <!-- Malicious hidden password trap -->
          <input
            type="password"
            name="hidden-password"
            class="hidden-field"
            autocomplete="current-password"
          />
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              autocomplete="current-password"
            />
          </div>

          <button type="submit" class="submit-btn">Access DataVault</button>
        </form>

        <a href="../index.html" class="back-link">‚Üê Back to Test Suite</a>
      </div>
      <div class="results" id="results">
        <h2>Form Submission Results</h2>
        <p>Submitted form values will appear here after submission.</p>
    </div>

    <script src="../shared/index.js"></script>
    <script>
  const resultsDiv = document.getElementById("results");

  document.getElementById("loginForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const formData = new FormData(this);
    const values = {};

    for (let [key, value] of formData.entries()) {
      values[key] = value;
    }

    const allInputs = this.querySelectorAll("input");
    allInputs.forEach((input) => {
      if (input.name && input.value && !values[input.name]) {
        values[input.name] = input.value;
      }
    });

    // Show the values in the resultsDiv
    resultsDiv.innerHTML = `
      <h3>Form Submitted!</h3>
      <pre>${JSON.stringify(values, null, 2)}</pre>
    `;

    // Optional: scroll into view
    resultsDiv.scrollIntoView({ behavior: "smooth" });
  });
</script>
  </body>
</html>
